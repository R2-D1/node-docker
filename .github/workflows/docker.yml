name: CI

on: [push]

jobs:
  build:
    runs-on: ubuntu-latest

    steps:
      - uses: actions/checkout@v2
      - name: Docker login
      - run: docker login -u ${{ secrets.DOCKER_USER }} -p ${{ secrets.DOCKER_PASSWORD }}
      - name: Docker build
      - run: docker-compose -f docker-compose.yml -f docker-compose.prod.yml up --no-deps -d
      - name: Docker push
      - run: docker push ${{ secrets.DOCKER_USER }}/node-app

